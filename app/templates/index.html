{% extends "base.html" %}

{% block content %}
<div class='container'>
    <div class="row">
        <div class="col-md-10">
            <!--<style>
                body {background: url(https://www.carbonbrief.org/wp-content/uploads/2015/02/stock-deep-ocean-1550x804.jpg);
                      color: wheat;
                      }
            </style>-->
            {% if current_user.is_anonymous %}
            <h2>Hello, <a href="{{ url_for('register') }}">user!</a></h2>
            {% else %}
            <h2>Hello, {{ current_user.username }}!</h2>
            {% endif %}
            <hr/>                
                <div class="row">
                    <div class="col-8">
                            <h3>Daily in Bandcamp:</h3><hr/>
                            {% for music in bc_list %}
                            <iframe allowtransparency="{{ music.allowtransparency }}" frameborder="{{ music.frameborder }}" height="{{ music.height }}}" src="{{ music.src }}" style="{{ music.style }}" width="{{ music.width }}"></iframe><hr/> 
                            {% endfor %}
                        <h3>New in SoundCloud:</h3><hr/>
                        {% for info in sc_list %}
                        <h4>{{ info.genre }}</h4>
                        <iframe id="sc-widget" src="https://w.soundcloud.com/player/?url={{ info.uri }}" width="100%" height="100" scrolling="no" frameborder="no"></iframe>
            <script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
            <script type="text/javascript">
            (function(){
                var widgetIframe = document.getElementById('sc-widget'),
                    widget       = SC.Widget(widgetIframe);

                widget.bind(SC.Widget.Events.READY, function() {
                widget.bind(SC.Widget.Events.PLAY, function() {
                    // get information about currently playing sound
                    widget.getCurrentSound(function(currentSound) {
                    console.log('sound ' + currentSound.get('') + 'began to play');
                    });
                });
                // get current level of volume
                widget.getVolume(function(volume) {
                    console.log('current volume value is ' + volume);
                });
                // set new volume level
                widget.setVolume(50);
                // get the value of the current position
                });

            }());
            </script>
                        <!--<h5>{{ info.title }}</h5>
                        <h5><a href="{{ url_for('player') }}"><img src="{{ (info.artwork) }}"> </span></a></h5>-->
                        <hr/>
                        {% endfor %}
                       
                    </div>
                </div>   
                   
        </div>
        {% if current_user.is_anonymous %}
        <div class="col-md-2 col-md-push-8">
            <h2>Sign In</h2>
            <form action="" method="post" novalidate>
                {{ form.hidden_tag() }}
                <p>
                    {{ form.username.label }}<br>
                    {{ form.username(size=16) }}
                    {% for error in form.username.errors %}
                    <span style="color:red;">[{{ error }}]</span>
                    {% endfor %}
                </p>
                <p>
                    {{ form.password.label }}<br>
                    {{ form.password(size=16) }}
                    {% for error in form.password.errors %}
                    <span style="color:red;">[{{ error }}]</span>
                    {% endfor %}
                </p>
                <p>{{ form.remember_me() }} {{ form.remember_me.label }}</p>
                <p>{{ form.submit() }}</p>
                <p> New User? <a href="{{ url_for('register') }}">Click to Register!</a></p>
            </form>            
        </div>        
        {% endif %}
    </div>
</div>
{% endblock %}
